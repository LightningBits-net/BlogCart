@inherits LayoutComponentBase
@namespace BlogCart.Shared.MainLayouts


<MudThemeProvider Theme="MyTheme" @bind-IsDarkMode="@_isDarkMode" @ref="@_mudThemeProvider" />
<MudDialogProvider />
<MudSnackbarProvider />


<MudLayout Color="Color.Dark">
    <StefManciaAppBar OnSidebarToggled="ToggleSidebar" />
    <StefManciaNavMenu SideBarOpen="_sidebarOpen" />
    <MudScrollToTop>
        <MudFab Color="Color.Dark" Icon="@Icons.Filled.ArrowCircleUp" />
    </MudScrollToTop>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>


@code {
    private bool _sidebarOpen = false;
    private void ToggleSidebar() => _sidebarOpen = !_sidebarOpen;

    private bool _isDarkMode;
    private MudThemeProvider _mudThemeProvider;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            _isDarkMode = await _mudThemeProvider.GetSystemPreference();
            StateHasChanged();
        }
    }

    private MudTheme MyTheme = new MudTheme()
    {
        Palette = new PaletteLight()
        {
            Primary = "#27272f",
            Secondary = " #bdbdbd",
            Dark = "#757575",
            Black = "#000000",
            White = "#ffffffff",
            Background = "#32333d",
            BackgroundGrey = "#27272f",
            Surface = "#ffffffff",
            TextPrimary = "#000000",
            TextSecondary = "rgba(0, 0, 0, 0.50)",
            AppbarBackground = "#bdbdbd",
            AppbarText = "#ffffffff",
            DrawerBackground = "#27272f",
            DrawerText = "#ffffffb3",
            DrawerIcon = "#ffffffb3",
        },
        PaletteDark = new PaletteDark()
        {
            Primary = "#3a3a3a",
            Secondary = "#808080",
            Black = " #aaaaaa",
            White = "#ffffffff",
            Background = "#32333d",
            BackgroundGrey = "#27272f",
            Surface = "#757575",
            TextPrimary = "#ffffffb3",
            TextSecondary = "rgba(255, 255, 255, 0.50)",
            AppbarBackground = "#27272f",
            AppbarText = "#fafafa",
            DrawerBackground = "#27272f",
            DrawerText = "#ffffffb3",
            DrawerIcon = "#ffffffb3",
        },
    };
}

